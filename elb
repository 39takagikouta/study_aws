65
可用性を上げる方法　具体的指標　稼働率
稼働率をあげるための基本的な考え方
・障害発生間隔を長くする
・平均復旧時間を短くする
そのための手段　冗長化（システムの構成要素を多重化すること）し、単一障害点（SPOF）をなくす
具体的な方法
1要素単体の稼働率アップ　オンプレだけ
2要素を組み合わせて全体の稼働率を上げる
冗長化構成　webサーバーはアクティブアクティブ　データベースはデータの同期が必要で重くなるのでアクティブスタンバイが多い
3負荷をプロビジョニングで回避する
とは、アクセス数などを予測し適切にリソースを準備すること
スケールアップとスケールアウトがあり、途中まで前者がいいが、途中から後者のがコスパが良くなる

66サーバー構成のベストプラクティス
稼働率を上げるための典型的なパターン＝ベストプラクティス
パターン：ウェブサーバーとdbサーバを分ける
スペックの観点でもセキュリティの観点でもこっちがいい　dbは外から触れられない場所に
パターン：web2db1
webはユーザー数に負荷が依存する　今回のやつ
パターン：22
マスタースレーブ方式でdb冗長化　awsで言うマルチaz

67elb
ロードバランサーとは、各サーバにアクセスを振り分け、負荷分散する装置
elbとは、ec2インスタンスに負荷分散　ヘルスチェックをして正常なもののみに振り分ける
特徴　スケーラブル（負荷に応じて勝手に）　アベイラビリティゾーンにまたがる構成　名前解決（dnsが割り当てられるので、アクセスにはdns使用。ipアドレスならスケーラブルごとに変わってしまう）、安い従量課金マネージド

68


